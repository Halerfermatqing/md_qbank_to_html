# 📚 Markdown题库转HTML刷题神器 - 使用指南

## 🎯 功能简介

本插件可以将特定格式的Markdown题库文件转换为**功能完整的HTML离线刷题页面**，支持手机端优化，适合随时随地刷题复习。

---

## 📝 一、Markdown题库格式规范

### 1.1 基本结构

```markdown
# 题库标题

> 题库描述（可选）

## 单选题

1. 题干内容
   1. 选项A :: 解析内容（可选）
   2. ==选项B== :: 这是正确答案的解析
   3. 选项C
   4. 选项D :: 错误选项的解析

2. 第二题题干
   1. 选项内容
   2. ==正确选项==
   ...

## 多选题

1. 多选题题干
   1. ==正确选项1== :: 解析
   2. 选项2
   3. ==正确选项2==
   4. 选项3

## 判断题

1. 判断题题干
   1. ==正确==
   2. 错误
```

### 1.2 格式规则详解

| 元素 | 格式 | 说明 | 示例 |
|------|------|------|------|
| **题库标题** | `# 标题` | 一级标题，显示在页面顶部 | `# 线性代数练习题` |
| **题库描述** | `> 描述内容` | 引用块，可选，支持多行 | `> 本题库包含50道精选题目` |
| **题型分类** | `## 题型名称` | 二级标题，必须包含"单选题"、"多选题"或"判断题" | `## 单选题` |
| **题目序号** | `数字. 题干` | 有序列表，顶格书写 | `1. 在Python中，以下哪个是正确的？` |
| **选项** | `   数字. 选项内容` | 有序列表，**必须缩进**（空格或Tab） | `   1. 选项A` |
| **正确答案** | `==内容==` | 用双等号包裹正确选项 | `   2. ==正确答案==` |
| **解析** | `:: 解析内容` | 双冒号分隔，写在选项后 | `   1. 选项A :: 这个选项错误因为...` |

### 1.3 支持的内容格式

#### 数学公式
```markdown
行内公式：$x^2 + y^2 = r^2$

块级公式：
$$
\int_0^{1} 3x^2 + 2x + 1\,dx = x^3 + x^2 + x \Big|_0^1 = 3
$$
```

#### 代码高亮
```markdown
```python
def hello():
    print("Hello, World!")
\```
```

#### 图片
```markdown
![图片描述](./images/pic.png)  # 自动转为base64嵌入
```

#### 文本格式
```markdown
**粗体文本**
*斜体文本*
`行内代码`
```

---

## 📋 二、完整示例

```markdown
# 🧮 数学与编程练习题集

> 本题库涵盖线性代数、微积分和Python编程基础知识，共23题

## 单选题

1. 在Python中，`==`和`is`运算符的作用是什么？
   1. 完全相同，可以互换使用 :: `==`比较值，`is`比较对象身份，不能互换
   2. ==`==`比较值，`is`比较对象身份== :: 正确！`==`判断值是否相等，`is`判断是否为同一对象
   3. `==`比较对象，`is`比较值
   4. 两者都比较对象身份

2. 一元二次方程求根：已知方程 $ax^2 + bx + c = 0$，其判别式为？
   1. $b^2 - ac$
   2. ==$b^2 - 4ac$== :: 正确！判别式 $\Delta = b^2 - 4ac$
   3. $4ac - b^2$
   4. $a^2 - 4bc$

## 多选题

1. 以下哪些是Python的可变数据类型？（多选）
   1. ==列表（list）== :: 列表是可变类型，可以修改元素
   2. 元组（tuple） :: 元组是不可变类型
   3. ==字典（dict）== :: 字典是可变类型
   4. 字符串（str） :: 字符串是不可变类型

## 判断题

1. 在Python中，字符串是可变类型。
   1. 正确 :: 字符串是不可变类型，无法直接修改
   2. ==错误== :: 正确！Python的字符串是不可变的（immutable）
```

---

## ✨ 三、生成的HTML功能特性

### 3.1 核心答题功能

| 功能 | 说明 |
|------|------|
| **智能判题** | 单选/判断题：点击即判，立即显示对错<br>多选题：点击提交按钮后判分 |
| **即时反馈** | ✅ 正确：蓝色高亮<br>❌ 错误：红色高亮 |
| **解析展示** | 答题后自动展开所有选项的解析 |
| **进度保存** | 使用localStorage自动保存答题进度，刷新页面不丢失 |
| **答题统计** | 实时显示：总题数、已答题数、正确数、正确率 |

### 3.2 手机端优化

| 功能 | 说明 |
|------|------|
| **卡片式答题** | 一次只显示一题，专注当前题目 |
| **左右滑动** | 手势切换题目，单手操作友好 |
| **底部三键** | 上一题 ｜ 📌标记 ｜ 下一题 |
| **题目计数器** | 右上角显示当前题号/总题数（如 3/23） |
| **沉浸式模式** | 一键隐藏工具栏，最大化答题空间 |

### 3.3 高级功能

#### 📊 智能筛选系统
- **全部**：显示所有题目（卡片模式）
- **单选题/多选题/判断题**：按题型筛选（卡片模式）
- **❌ 错题**：自动统计答错的题（列表模式，可上下滚动）
- **📌 重点**：显示手动标记的重点题（列表模式）

#### 🌙 夜间模式
- 深色主题，护眼舒适
- 一键切换，自动记忆偏好

#### 📖 复习模式
- 展开所有题目和解析
- 上下滚动浏览全部内容
- 适合快速复习已做题目

#### 📈 答题进度条
- 页面顶部绿色进度条
- 实时显示答题进度（0-100%）

#### 🔄 其他功能
- **随机打乱**：打乱题目顺序
- **重置所有**：清空答题记录
- **重置单题**：重新作答当前题

---

## 🚀 四、使用步骤

### 4.1 创建题库

1. 新建Markdown文件（如 `线性代数.md`）
2. 按照上述格式编写题目
3. 保存文件

### 4.2 转换为HTML

```bash
# 命令行方式
python main.py md_qbank_to_html 线性代数.md 线性代数题库.html

# 或使用GUI界面
python main.py
# 然后选择 "Markdown题库转HTML" 功能
```

### 4.3 使用题库

1. 用浏览器打开生成的HTML文件
2. 支持手机、平板、电脑
3. **完全离线使用**，无需网络

---

## 💡 五、最佳实践建议

### 5.1 题目编写技巧

1. **题干清晰**：用一句话表达清楚问题
2. **选项简洁**：避免冗长，突出关键差异
3. **解析详细**：
   - 正确选项：说明为什么正确
   - 错误选项：指出错误原因
4. **公式规范**：使用标准LaTeX语法
5. **代码格式**：指定语言类型（如 \`\`\`python）

### 5.2 题库组织建议

```
项目/
├── 数学/
│   ├── 线性代数.md
│   ├── 微积分.md
│   └── 概率论.md
├── 编程/
│   ├── Python基础.md
│   ├── 数据结构.md
│   └── 算法.md
└── images/
    └── (题目用到的图片)
```

### 5.3 刷题流程推荐

1. **初次刷题**：
   - 使用卡片模式逐题作答
   - 答错的题自动进入错题本
   - 重要的题手动标记📌

2. **错题复习**：
   - 点击"❌ 错题"筛选
   - 列表模式查看所有错题
   - 重点攻克薄弱环节

3. **考前冲刺**：
   - 点击"📌 重点"筛选
   - 复习模式展开所有解析
   - 快速浏览关键知识点

---

## ⚙️ 六、技术特性

### 6.1 离线支持
- ✅ 图片转base64内嵌
- ✅ 所有CSS/JS内联
- ✅ 数学公式使用MathJax CDN（首次需联网加载，后续缓存）
- ✅ 代码高亮使用highlight.js CDN

### 6.2 浏览器兼容性
- Chrome/Edge：✅ 完美支持
- Safari（iOS）：✅ 完美支持
- Firefox：✅ 完美支持
- 微信内置浏览器：✅ 支持

### 6.3 数据持久化
- 使用 localStorage 保存：
  - 答题进度（已答题目、对错情况）
  - 重点标记
  - 模式偏好（沉浸模式、夜间模式）

---

## 🎨 七、界面预览

### 卡片答题模式
```
┌──────────────────────────────────┐
│  📋 显示工具    🌙    题目计数: 1/23 │
├──────────────────────────────────┤
│                                  │
│  第1题 [单选题]              📌   │
│                                  │
│  在Python中，`==`和`is`的作用？   │
│                                  │
│  ○ 1. 完全相同                    │
│  ○ 2. `==`比较值，`is`比较对象    │
│  ○ 3. `==`比较对象，`is`比较值    │
│  ○ 4. 都比较对象身份              │
│                                  │
├──────────────────────────────────┤
│   ← 上一题  │    📌    │  下一题 → │
└──────────────────────────────────┘
```

### 列表复习模式（错题）
```
┌──────────────────────────────────┐
│  筛选: [全部][单选][多选][判断]   │
│        [❌错题][📌重点]           │
├──────────────────────────────────┤
│  第2题 [单选题]              📌   │
│  一元二次方程判别式...            │
│  ✅ 正确: b²-4ac                 │
│  ❌ 错误: 你选择的是b²-ac         │
│  📝 解析: 判别式Δ=b²-4ac...      │
├──────────────────────────────────┤
│  第5题 [多选题]              📌   │
│  Python可变类型...               │
│  ...                             │
└──────────────────────────────────┘
```

---

## 📞 八、常见问题

### Q1: 图片无法显示？
**A**: 确保图片路径正确，使用相对路径（如 `./images/pic.png`），图片文件与Markdown文件在同一项目下。

### Q2: 公式显示为LaTeX代码？
**A**: 
1. 检查公式语法是否正确
2. 首次打开需要联网加载MathJax
3. 确保使用 `$...$`（行内）或 `$$...$$`（块级）

### Q3: 答题进度丢失？
**A**: 不要使用浏览器的隐私/无痕模式，localStorage在隐私模式下会被清空。

### Q4: 手机上无法左右滑动？
**A**: 确保滑动手势在题目区域，避免在浏览器的边缘滑动（会触发返回）。

---

## 📜 九、版本历史

- **v1.0** - 基础功能：题库解析、答题判分
- **v2.0** - 手机端优化：卡片模式、滑动手势
- **v3.0** - 沉浸式答题模式
- **v4.0** - 进度条、夜间模式、复习模式
- **v5.0** - 智能错题统计、重点标记、全局连续编号

---

## 🙏 十、致谢

感谢以下开源项目：
- [MathJax](https://www.mathjax.org/) - 数学公式渲染
- [highlight.js](https://highlightjs.org/) - 代码语法高亮

---

**祝你刷题愉快！📚💪**
